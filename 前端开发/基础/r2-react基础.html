<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>redux | Jason&#39;s Blog</title>
    <meta name="description" content="Jason个人站，技术，营销和白日梦 ga">
    <link rel="icon" href="/favicon.icon">
    
    <link rel="preload" href="/assets/css/0.styles.79ba9eaa.css" as="style"><link rel="preload" href="/assets/js/app.20b7a3cd.js" as="script"><link rel="preload" href="/assets/js/2.94e36c74.js" as="script"><link rel="preload" href="/assets/js/9.aa96a151.js" as="script"><link rel="prefetch" href="/assets/js/10.1d27e27a.js"><link rel="prefetch" href="/assets/js/11.e4f2875f.js"><link rel="prefetch" href="/assets/js/12.b35cc923.js"><link rel="prefetch" href="/assets/js/13.f07507f2.js"><link rel="prefetch" href="/assets/js/14.458caf1e.js"><link rel="prefetch" href="/assets/js/15.a99294e4.js"><link rel="prefetch" href="/assets/js/16.7cb0eb3c.js"><link rel="prefetch" href="/assets/js/17.c3e00627.js"><link rel="prefetch" href="/assets/js/18.03c2d240.js"><link rel="prefetch" href="/assets/js/19.9c92a692.js"><link rel="prefetch" href="/assets/js/20.ad8acc7f.js"><link rel="prefetch" href="/assets/js/21.0446ff0b.js"><link rel="prefetch" href="/assets/js/22.a4ba6dc2.js"><link rel="prefetch" href="/assets/js/23.10931822.js"><link rel="prefetch" href="/assets/js/24.29db39b4.js"><link rel="prefetch" href="/assets/js/25.4265a2b1.js"><link rel="prefetch" href="/assets/js/26.ad124b4a.js"><link rel="prefetch" href="/assets/js/27.29dfdf21.js"><link rel="prefetch" href="/assets/js/28.98b3e125.js"><link rel="prefetch" href="/assets/js/29.52a42b6a.js"><link rel="prefetch" href="/assets/js/3.ff294584.js"><link rel="prefetch" href="/assets/js/30.9700a75f.js"><link rel="prefetch" href="/assets/js/31.67960775.js"><link rel="prefetch" href="/assets/js/4.2c04eda2.js"><link rel="prefetch" href="/assets/js/5.57c93f9b.js"><link rel="prefetch" href="/assets/js/6.7b8561e6.js"><link rel="prefetch" href="/assets/js/7.74e24fbc.js"><link rel="prefetch" href="/assets/js/8.8e068b73.js">
    <link rel="stylesheet" href="/assets/css/0.styles.79ba9eaa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jason's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/前端开发/" class="nav-link">前端</a></div><div class="nav-item"><a href="/算法/" class="nav-link">算法</a></div><div class="nav-item"><a href="/增长黑客/" class="nav-link">增长黑客</a></div><div class="nav-item"><a href="/故事/" class="nav-link">故事</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/前端开发/" class="nav-link">前端</a></div><div class="nav-item"><a href="/算法/" class="nav-link">算法</a></div><div class="nav-item"><a href="/增长黑客/" class="nav-link">增长黑客</a></div><div class="nav-item"><a href="/故事/" class="nav-link">故事</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/前端开发/基础/js-Javascript高级程序设计笔记.html" class="sidebar-link">js--JavaScript高级程序设计</a></li><li><a href="/前端开发/基础/js-常见源码实现.html" class="sidebar-link">js--常见源码实现</a></li><li><a href="/前端开发/基础/js-继承与原型链.html" class="sidebar-link">js-作用域，原型链，闭包</a></li><li><a href="/前端开发/基础/css-css基础.html" class="sidebar-link">css--css 基础</a></li><li><a href="/前端开发/基础/css-sass.html" class="sidebar-link">css--sass 基础</a></li><li><a href="/前端开发/基础/node-node基础.html" class="sidebar-link">node--node 基础</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>react基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/前端开发/基础/r1-react基础.html" class="sidebar-link">react基础 1 v16</a></li><li><a href="/前端开发/基础/r2-react基础.html" class="active sidebar-link">redux</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/前端开发/基础/r3-react基础.html" class="sidebar-link">redux-thunk redux-saga</a></li><li><a href="/前端开发/基础/r4-react基础.html" class="sidebar-link">saga</a></li><li><a href="/前端开发/基础/r5-react基础.html" class="sidebar-link">react-redux</a></li></ul></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/前端开发/进阶/w1-最简单的webpack4项目.html" class="sidebar-link">w1-最简单的webpack打包</a></li><li><a href="/前端开发/进阶/w2-动手搭建个vue项目.html" class="sidebar-link">w2-动手搭建个vue项目</a></li><li><a href="/前端开发/进阶/w3-webpack4详解.html" class="sidebar-link">w3-webpack4详解</a></li><li><a href="/前端开发/进阶/w4-自己实现个webpack.html" class="sidebar-link">w4-自己实现个webpack</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>vue源码</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>实战</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/前端开发/实战/VueUI库.html" class="sidebar-link">基于Vue的UI库</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>周边技术</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/前端开发/周边/vuepress搭建blog.html" class="sidebar-link">vuepress搭建Blog</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><img src="/assets/img/redux.3c462a93.png" alt="redux"></p> <div class="language-js extra-class"><pre class="language-js"><code>component： 借书的人 
action：想要借什么这句话
store： 图书馆
reducer： 登记本
</code></pre></div><p>创建store</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
    reducer<span class="token punctuation">,</span>
    <span class="token comment">// 开发者工具</span>
    window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION__ <span class="token operator">&amp;&amp;</span> window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION__</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><p>创建reducer</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
  inputValue<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>定义action并传递给store，store自动将prevState和action传递给reducer</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'change_input_value'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>reducer定义新的state返回</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// reducer 可以接收state 但是绝对不能修改state，所以先要深拷贝</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'change_input_value'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>组件需要订阅store变化, 更新状态</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleInputChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleInputChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handleStoreChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleStoreChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//组件需要订阅store的变化</span>
    store<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleStoreChange<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span>
  <span class="token function">handleStoreChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><p>组件相应的方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'change_input_value'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleStoreChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleListItemClick</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'remove_list_item'</span><span class="token punctuation">,</span>
      value<span class="token punctuation">:</span> index
    <span class="token punctuation">}</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> action <span class="token operator">=</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'add_list_item'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>reducer</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> defaultState <span class="token operator">=</span> <span class="token punctuation">{</span>
  inputValue<span class="token punctuation">:</span> <span class="token string">'111'</span><span class="token punctuation">,</span>
  list<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// reducer 可以接收state 但是绝对不能修改state，所以先要深拷贝</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter">state <span class="token operator">=</span> defaultState<span class="token punctuation">,</span> action</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'change_input_value'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> action<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'remove_list_item'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>value<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">'add_list_item'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newState <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>newState<span class="token punctuation">.</span>inputValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
    newState<span class="token punctuation">.</span>inputValue <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> newState<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>action拆分</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token constant">CHANGE_INPUT_VALUE</span> <span class="token operator">=</span> <span class="token string">'change_input_vuale'</span>
</code></pre></div><p>action creator 统一创建 action</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">CHANGE_INPUT_VALUE</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./actionTypes&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getInputChangeAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token constant">CHANGE_INPUT_VALUE</span><span class="token punctuation">,</span>
  value
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>组件中引用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">handleInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">getInputChangeAction</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>action<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>store中文件组织
<img src="data:image/png;base64,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" alt="file"></p> <h3 id="知识点"><a href="#知识点" aria-hidden="true" class="header-anchor">#</a> 知识点</h3> <ul><li>store是唯一的</li> <li>只有 store 才能改变自己的内容</li> <li>reducer 必须是纯函数</li> <li>无状态组件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">component</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span><span class="token punctuation">(</span>
    <span class="token operator">...</span>jsx
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>发送异步请求，componentDidMount钩子</li> <li>redux-thunk
create store中，先引入applyMiddleware, 作为createStore第二个参数，它自身参数可以是数组<br>
这个运行有问题，应该用composeEnhancers
详见github/reduxdevtools高级配置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware<span class="token punctuation">,</span> component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;redux&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> reducer <span class="token keyword">from</span> <span class="token string">'./reducer'</span>
<span class="token keyword">import</span> thunk <span class="token keyword">from</span> <span class="token string">&quot;redux-thunk&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> composeEnhancers <span class="token operator">=</span> window<span class="token punctuation">.</span>__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ <span class="token operator">?</span>   
    window<span class="token punctuation">.</span><span class="token function">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// Specify extension’s options like name, actionsBlacklist, actionsCreators, serialize...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> compose<span class="token punctuation">;</span>

<span class="token keyword">const</span> enhancer <span class="token operator">=</span> <span class="token function">composeEnhancers</span><span class="token punctuation">(</span>
  <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>thunk<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
  reducer<span class="token punctuation">,</span>
  enhancer  
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> store<span class="token punctuation">;</span>
</code></pre></div><ul><li>使用了redux-chunk可以在action中使用。没有thunk时action返回一个对象，而有了thunk时，可以返回函数，函数可以做异步工作。
而在组件中 store.dispatch(thunk-action)这个chunk-action函数将会被自动执行。 thunk函数可以接收dispatch,</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/前端开发/基础/r1-react基础.html" class="prev">
          react基础 1 v16
        </a></span> <span class="next"><a href="/前端开发/基础/r3-react基础.html">
          redux-thunk redux-saga
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.20b7a3cd.js" defer></script><script src="/assets/js/2.94e36c74.js" defer></script><script src="/assets/js/9.aa96a151.js" defer></script>
  </body>
</html>
